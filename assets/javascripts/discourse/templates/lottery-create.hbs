<div class="lottery-create">
  <h1>{{i18n "choujiang.create.page_title"}}</h1>

  {{#if created}}
    <div class="alert alert-success">
      {{i18n "choujiang.create.success"}}
      <button class="btn btn-primary" {{action "goTopic"}}>
        {{i18n "choujiang.create.go_topic"}}
      </button>
    </div>
  {{else}}
    {{#if currentUser}}
      <div class="field">
        <label>{{i18n "choujiang.create.field.title"}}</label>
        {{input value=model.title class="input-large"}}
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.prize"}}</label>
        {{input value=model.prize}}
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.winners"}}</label>
        {{input type="number" value=model.winners min="1"}}
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.draw_time"}}</label>
        {{input value=model.draw_time placeholder="2025-07-10 20:00"}}
        <div class="hint">格式：YYYY-MM-DD HH:MM</div>
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.minimum_points"}}</label>
        {{input type="number" value=model.minimum_points min="0"}}
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.description"}}</label>
        {{textarea value=model.description rows="3"}}
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.extra_body"}}</label>
        {{d-editor value=model.extra_body}}
      </div>

      <div class="field">
        <label>{{i18n "choujiang.create.field.category"}}</label>
        {{category-chooser value=model.category_id onChange=(action (mut model.category_id))}}
      </div>

      <div class="actions">
        <button class="btn btn-primary" disabled={{not canSubmit}} {{action "submit"}}>
          {{#if submitting}}
            {{i18n "choujiang.create.submitting"}}
          {{else}}
            {{i18n "choujiang.create.submit"}}
          {{/if}}
        </button>
      </div>
    {{else}}
      <div class="alert alert-info">
        {{i18n "choujiang.create.need_login"}}
        <a href="/login">登录</a> |
        <a href="https://www.tkcall.com/t/topic/204" target="_blank" rel="noopener">
          {{i18n "choujiang.create.help_link_text"}}
        </a>
      </div>
    {{/if}}
  {{/if}}
</div>
